## 2024-05-23 - Stored XSS in Offline-First App
**Vulnerability:** Stored XSS via `localStorage` import features. The app trusted local storage data implicitly, assuming it was only generated by the app itself. However, the import feature allows external data to enter `localStorage` without content sanitization.
**Learning:** "Offline-first" or "Local-first" apps often neglect input validation because they treat the local database as a trusted zone. Data import features bridge the gap between untrusted external world and trusted local storage, bypassing standard API validation layers.
**Prevention:** Sanitize data at the *rendering* layer (Output Encoding) regardless of source. Also, validate/sanitize imported data at the *entry* point (Input Validation), ensuring it conforms to expected schemas (e.g. valid UUIDs).

## 2024-10-18 - Nested Validation Gap & Duplicated Logic
**Vulnerability:** XSS via `localStorage` import. The validation logic (`Validator`) checked the session structure but failed to validate nested objects (exercises) recursively. Additionally, `Storage.importData` implemented its own weak validation instead of using the central `Validator`.
**Learning:** Shallow validation is insufficient for complex data structures. Also, "Don't Repeat Yourself" (DRY) is a security principleâ€”duplicated validation logic often leads to one version being weaker than the other.
**Prevention:** Recursively validate all nested objects. Centralize validation logic in a single module and enforce its use across all data entry points (UI, API, Import).
